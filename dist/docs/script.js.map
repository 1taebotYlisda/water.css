{"version":3,"sources":["script.js"],"names":["w","window","CDN_BASE","FILE_SIZES","dark.min.css","dark.standalone.min.css","dark-legacy.min.css","dark-legacy.standalone.min.css","light.min.css","light.standalone.min.css","light-legacy.min.css","light-legacy.standalone.min.css","getFileName","_ref","theme","legacySuffix","isLegacy","standaloneExt","isStandalone","concat","getFileSnippet","_ref3","fileName","stylesheetSnippet","_ref2","alternativeTheme","alternativeFile","getFilePreloadSnippet","trim","externalElements","_productHunt","document","querySelector","_stylesheet","_updateProductHunt","this","src","replace","_updateStylesheet","href","update","options","preferedTheme","displayedTheme","createColorSchemeListener","scheme","queryHandler","mediaQuery","matchMedia","addListener","query","matches","Vue","el","filters","capitalize","str","charAt","toUpperCase","slice","data","versionOptions","preferedColorScheme","copyStatus","computed","selectedVersion","fileSize","toFixed","fileSnippet","created","_this","match","methods","copyToClipboard","_this2","Promise","resolve","then","clipboard","writeText","setTimeout","watch","nextScheme","deep","handler","nextOptions"],"mappings":"AAAA,aAQA,IAAMA,EAAuCC,OAKvCC,EAAW,sDAGXC,EAAa,CACjBC,eAAgB,IAChBC,0BAA2B,KAC3BC,sBAAuB,MACvBC,iCAAkC,KAClCC,gBAAiB,IACjBC,2BAA4B,IAC5BC,uBAAwB,KAAQ,KAAO,KACvCC,kCAAmC,MAI/BC,EAAc,SAAAC,GAAqE,IAApCC,EAAoCD,EAApCC,MAC7CC,EADiFF,EAA7BG,SAC1B,UAAY,GACtCC,EAFiFJ,EAAnBK,aAE/B,cAAgB,GACrD,MAAA,GAAAC,OAAmCL,GAAnCK,OAA2CJ,GAA3CI,OAA0DF,EAA1D,aAmBIG,EAAiB,SAAAC,GAAqE,IAApCP,EAAoCO,EAApCP,MAAOE,EAA6BK,EAA7BL,SAAUE,EAAmBG,EAAnBH,aACjEI,EAAWV,EAAY,CAAEE,MAAAA,EAAOE,SAAAA,EAAUE,aAAAA,IAC1CK,EAAiB,gCAAAJ,OAAmCjB,GAAnCiB,OAA8CG,EAA9C,MAEvB,OAAKN,GAAYE,EAAqBK,GAfV,SAAAC,GAAqE,IAApCV,EAAoCU,EAApCV,MAAOE,EAA6BQ,EAA7BR,SAAUE,EAAmBM,EAAnBN,aACxEO,EAA6B,SAAVX,EAAmB,QAAU,OAChDY,EAAkBd,EAAY,CAAEE,MAAOW,EAAkBT,SAAAA,EAAUE,aAAAA,IAEzE,MAAA,sGAAAC,OAEqCjB,GAFrCiB,OAEgDP,EAAY,CAAEE,MAAAA,EAAOE,SAAAA,EAAUE,aAAAA,IAF/E,6CAAAC,OAGqCjB,GAHrCiB,OAGgDO,EAHhD,oCAAAP,OAGkGM,EAHlG,OAauBE,CAAsB,CAAEb,MAAAA,EAAOE,SAAAA,EAAUE,cAAc,IACrD,OAASK,GAAmBK,QAKjDC,EAAmB,CACvBC,aAA+CC,SAASC,cAAc,mBACtEC,YAA6CF,SAASC,cAAc,kBACpEE,mBAHuB,SAGiBpB,GACtCqB,KAAKL,aAAaM,IAAMD,KAAKL,aAAaM,IAAIC,QAAQ,aAAcvB,IAEtEwB,kBANuB,SAMmBhB,GACxCa,KAAKF,YAAYM,KA1DJ,MA0DsBjB,GAIrCkB,OAXuB,SAWcC,EAA+BC,GAClE,IAAMC,EAAiBF,EAAQvB,aAAeuB,EAAQ3B,MAAQ4B,GAAiBD,EAAQ3B,MAEvFqB,KAAKG,kBAAkB1B,EAAY6B,IACnCN,KAAKD,mBAAmBS,KAStBC,EAA4B,SAACC,EAAQC,GACzC,IAAMC,EAAa/C,EAAEgD,WAAF,0BAAA7B,OAAuC0B,EAAvC,MACnBE,EAAWE,YAAY,SAAAC,GAAK,OAAIJ,EAAaI,EAAMC,WACnDL,EAAaC,EAAWI,UAS1B,IAAInD,EAAEoD,IAAI,CACRC,GAAI,gBACJC,QAAS,CACPC,WAAY,SAAuBC,GAAvB,OAA+BA,EAAIC,OAAO,GAAGC,cAAgBF,EAAIG,MAAM,KAGrFC,KAAM,CACJC,eAAgB,CAAE/C,MAA6B,OAASI,cAAc,EAAOF,UAAU,GACvF8C,oBAAqB,KACrBC,WAAY,MAEdC,SAAU,CAERC,gBAFQ,WAGN,MAAO,CACL3C,SAAUV,EAAYuB,KAAK0B,gBAC3BK,UA/E2CzB,EA+ErBN,KAAK0B,eA/E4B1D,EAAWS,EAAY6B,KAAa,GA+EhD0B,QAAQ,GACnDC,YAAahD,EAAee,KAAK0B,iBAhFrB,IAA+BpB,IAoFjD4B,QArBQ,WAqBE,IAAAC,EAAAnC,KACRS,EAA0B,OAAQ,SAAA2B,GAAK,OAAIA,IAAUD,EAAKR,oBAAsB,UAChFlB,EAA0B,QAAS,SAAA2B,GAAK,OAAIA,IAAUD,EAAKR,oBAAsB,WAE7E3B,KAAK2B,qBAAqBjC,EAAiBK,mBAAmBC,KAAK2B,sBAEzEU,QAAS,CACPC,gBADO,WACW,IAAAC,EAAAvC,KAChBwC,QAAQC,UACLC,KAAK,WAAA,OAAM7E,EAAE8E,UAAUC,UAAUL,EAAKT,gBAAgBG,eACtDS,KAAK,WAAA,OAAOH,EAAKX,WAAa,YAFjC,MAGS,WAAA,OAAOW,EAAKX,WAAa,WAClCiB,WAAW,WAAA,OAAON,EAAKX,WAAa,MAAO,OAG/CkB,MAAO,CACLnB,oBADK,SACoCoB,GACvCrD,EAAiBW,OAAOL,KAAK0B,eAAgBqB,IAE/CrB,eAAgB,CACdsB,MAAM,EACNC,QAFc,SAEwBC,GACpCxD,EAAiBW,OAAO6C,EAAalD,KAAK2B","file":"script.js","sourcesContent":["// @ts-check\n/** @typedef {'dark' | 'light'} Theme */\n/** @typedef {keyof typeof FILE_SIZES} FileName */\n/** @typedef {'success' | 'failed'} CopyStatus */\n/** @typedef {{ Vue: typeof import('vue').default, clipboard: Clipboard }} Libraries */\n/** @typedef {{ theme: Theme, isLegacy: boolean, isStandalone: boolean }} VersionOptions */\n\n/** Reference to global window, but with properties for loaded libraries. */\nconst w = /** @type {Window & Libraries} */ (window)\n\n/** The base URI from where the docs page loads the CSS files. */\nconst DEV_BASE = '../'\n/** The base URI from where instructions show to load the CSS files. */\nconst CDN_BASE = 'https://cdn.jsdelivr.net/gh/kognise/water.css/dist/'\n\n/** An object mapping the (minified + gzipped) fileSize in KB to a fileName. */\nconst FILE_SIZES = {\n  'dark.min.css': 1.4,\n  'dark.standalone.min.css': 1.31,\n  'dark-legacy.min.css': 0.177 + 1.16 + 1.15,\n  'dark-legacy.standalone.min.css': 1.16,\n  'light.min.css': 1.4,\n  'light.standalone.min.css': 1.3,\n  'light-legacy.min.css': 0.178 + 1.16 + 1.15,\n  'light-legacy.standalone.min.css': 1.15,\n}\n\n/** Takes in version options and returns the respective CSS file name. */\nconst getFileName = (/** @type {VersionOptions} */ { theme, isLegacy, isStandalone }) => {\n  const legacySuffix = isLegacy ? '-legacy' : ''\n  const standaloneExt = isStandalone ? '.standalone' : ''\n  return /** @type {FileName} */ (`${theme}${legacySuffix}${standaloneExt}.min.css`)\n}\n\n/** Takes in version options and returns the corresponding file size in KB. */\nconst getFileSize = (/** @type {VersionOptions} */ options) => FILE_SIZES[getFileName(options)] || 0\n\n/** Takes in version options and returns an HTML snippet that preloads the main stylesheet and\n *  conditionally preloads the alternative stylesheet (if the alternative theme is active). */\nconst getFilePreloadSnippet = (/** @type {VersionOptions} */ { theme, isLegacy, isStandalone }) => {\n  const alternativeTheme = theme === 'dark' ? 'light' : 'dark'\n  const alternativeFile = getFileName({ theme: alternativeTheme, isLegacy, isStandalone })\n\n  return `\n<!-- Preload the required stylesheets (optional) -->\n<link rel=\"preload\" as=\"style\" href=\"${CDN_BASE}${getFileName({ theme, isLegacy, isStandalone })}\">\n<link rel=\"preload\" as=\"style\" href=\"${CDN_BASE}${alternativeFile}\" media=\"(prefers-color-scheme: ${alternativeTheme})\">`\n}\n\n/** Takes in version options and returns the code snippet instructing users how to load the file. */\nconst getFileSnippet = (/** @type {VersionOptions} */ { theme, isLegacy, isStandalone }) => {\n  const fileName = getFileName({ theme, isLegacy, isStandalone })\n  const stylesheetSnippet = `<link rel=\"stylesheet\" href=\"${CDN_BASE}${fileName}\">`\n\n  if (!isLegacy || isStandalone) return stylesheetSnippet\n\n  const preloadSnippet = getFilePreloadSnippet({ theme, isLegacy, isStandalone: true })\n  return (preloadSnippet + '\\n\\n' + stylesheetSnippet).trim()\n}\n\n/** Handles elements external to the version picker that still need to be kept\n *  up to date with the current version, e.g. switching images from dark to light. */\nconst externalElements = {\n  _productHunt: /** @type {HTMLImageElement} */ (document.querySelector('#js-producthunt')),\n  _stylesheet: /** @type {HTMLLinkElement} */ (document.querySelector('#js-stylesheet')),\n  _updateProductHunt(/** @type {Theme} */ theme) {\n    this._productHunt.src = this._productHunt.src.replace(/dark|light/, theme)\n  },\n  _updateStylesheet(/** @type {FileName} */ fileName) {\n    this._stylesheet.href = DEV_BASE + fileName\n  },\n\n  /** Takes current version + the user's prefered scheme and updates all external elements. */\n  update(/** @type {VersionOptions} */ options, /** @type {?Theme} */ preferedTheme) {\n    const displayedTheme = options.isStandalone ? options.theme : preferedTheme || options.theme\n\n    this._updateStylesheet(getFileName(options))\n    this._updateProductHunt(displayedTheme)\n  },\n}\n\n/**\n * Sets up a media query for the given color scheme and runs the callback on change.\n * @param {Theme} scheme\n * @param {(matches: boolean) => any} queryHandler\n */\nconst createColorSchemeListener = (scheme, queryHandler) => {\n  const mediaQuery = w.matchMedia(`(prefers-color-scheme: ${scheme})`)\n  mediaQuery.addListener(query => queryHandler(query.matches))\n  queryHandler(mediaQuery.matches)\n}\n\n/** @typedef {Object} VueData\n * @prop {VersionOptions} versionOptions\n * @prop {?CopyStatus} copyStatus\n * @prop {?Theme} preferedColorScheme\n */\n\nnew w.Vue({\n  el: '#installation',\n  filters: {\n    capitalize: (/** @type {string} */ str) => str.charAt(0).toUpperCase() + str.slice(1),\n  },\n  /** @type {VueData} */\n  data: {\n    versionOptions: { theme: /** @type {Theme} */ ('dark'), isStandalone: false, isLegacy: false },\n    preferedColorScheme: null,\n    copyStatus: null,\n  },\n  computed: {\n    /** @returns {{ fileName: string, fileSize: string, fileSnippet: string }} */\n    selectedVersion() {\n      return {\n        fileName: getFileName(this.versionOptions),\n        fileSize: getFileSize(this.versionOptions).toFixed(2),\n        fileSnippet: getFileSnippet(this.versionOptions),\n      }\n    },\n  },\n  created() {\n    createColorSchemeListener('dark', match => match && (this.preferedColorScheme = 'dark'))\n    createColorSchemeListener('light', match => match && (this.preferedColorScheme = 'light'))\n\n    if (this.preferedColorScheme) externalElements._updateProductHunt(this.preferedColorScheme)\n  },\n  methods: {\n    copyToClipboard() {\n      Promise.resolve()\n        .then(() => w.clipboard.writeText(this.selectedVersion.fileSnippet))\n        .then(() => (this.copyStatus = 'success'))\n        .catch(() => (this.copyStatus = 'failed'))\n      setTimeout(() => (this.copyStatus = null), 1000)\n    },\n  },\n  watch: {\n    preferedColorScheme(/** @type {Theme} */ nextScheme) {\n      externalElements.update(this.versionOptions, nextScheme)\n    },\n    versionOptions: {\n      deep: true,\n      handler(/** @type {VersionOptions} */ nextOptions) {\n        externalElements.update(nextOptions, this.preferedColorScheme)\n      },\n    },\n  },\n})\n"]}